<h1>Listing recipes</h1>

<table>
    <thead>
    <tr>
        <th>Recipe</th>
        <th></th>
        <th></th>
        <th></th>
    </tr>
    </thead>

    <tbody>
    <% if not params[:search].nil? %>
        <% Recipe.ingredients_match(params[:search]).each do |match| %>
            <tr>
                <td><%= match.name %></td>
                <td><%= link_to 'Show', match %></td>
                <td><%= link_to 'Edit', edit_recipe_path(match) %></td>
                <td><%= link_to 'Destroy', match, method: :delete, data: {confirm: 'Are you sure?'} %></td>
            </tr>
        <% end %>

    <% else %>
        <% @recipes.each do |recipe| %>
            <tr>
                <td><%= recipe.name %></td>
                <td><%= link_to 'Show', recipe %></td>
                <td><%= link_to 'Edit', edit_recipe_path(recipe) %></td>
                <td><%= link_to 'Destroy', recipe, method: :delete, data: {confirm: 'Are you sure?'} %></td>
            </tr>
        <% end %>
    <% end %>


    </tbody>
</table>

<br>

<strong><%= link_to 'New Recipe', new_recipe_path %></strong>


<p>Search for a recipe</p>

<%= form_tag("/recipes", method: "get") do %>
    <p>
        <%= label_tag(:search) %>
        <%= text_field_tag :search %>
        <%= submit_tag "Search", :name => nil %>
    </p>
<% end %>


<br>

<div class="navbar">
    <a href="/users">Back to Users</a>
</div>

